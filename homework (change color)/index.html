<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Ключевое слово this в обработчике</title>
    <script>
        window.onload = function () {
            var pArr = document.getElementsByTagName("p");
            
            var color = "green";//дополнительная переменная по умолчанию green

            for (var i = 0; i < pArr.length; i++) {

            pArr[i].onclick = function(e){//загляним в событие

            color = e.path[0].style.backgroundColor;//узнаем цвет дива на который кликаем и дальше сравниваем
            this.style.backgroundColor = (color == "red") ? "green"  : "red";
                }
            }
        }
    </script>
    <style>
        p {
            background-color:green;
            float: left;
            height: 50px;
            width: 50px;
            margin: 10px;
        }
    </style>
</head>
<body>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
</body>
</html>
